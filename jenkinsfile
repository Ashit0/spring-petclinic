pipeline{
    agent{
        label 'JDK_17'
    }
    triggers{ pollSCM( '* * * * *') }
    stages{
        stage('vcs'){
            steps{
            git url: 'https://github.com/Ashit0/spring-petclinic.git',
                branch: 'develop'
            } 
        } 
        stage('BUILD'){
            steps{
                sh './mvnw package'
            }
        }
        stage('Sonar analysis'){
            steps{
                withSonarQubeEnv('SONAR_CLOUD'){
                    sh './mvnw clean package sonar:sonar -Dsonar.organization=ashit -Dsonar.projectkey=ashit_ashit-project'
                }
            }
        }
        
    }

}